<project name="Fetch Commons" basedir=".">

  <description>
    Common tasks and properties for fetching dependencies
  </description>

  <property name="targetVersion" value="${version}"/>
  <property name="dependenciesDir" value="${basedir}/dependencies"/>
  <property name="workspaceInfo" value="${dependenciesDir}/workspaceInfo.properties"/>


  <condition property="isMac">
    <os family="mac"/>
  </condition>

  <condition property="isWindows">
    <os family="windows"/>
  </condition>

  <condition property="isUnix">
    <os family="unix"/>
  </condition>


  <target name="dependenciesDir.checkExists">
    <condition property="dependenciesDir.exists">
      <available file="${dependenciesDir}" type="dir"/>
    </condition>
  </target>

  <target name="common.versionRequiredCheck">
    <fail message="Parameter version is required (paramter value should be target IDEA Version)">
      <condition>
        <not>
          <isset property="version"/>
        </not>
      </condition>
    </fail>
  </target>

  <target name="common.InitDependenciesDir" depends="dependenciesDir.checkExists" unless="dependenciesDir.exists">
    <mkdir dir="${dependenciesDir}"/>
    <touch file="${workspaceInfo}"/>
  </target>

</project>

