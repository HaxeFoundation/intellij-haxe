<project name="Idea Haxe language scripted package plugin" default="setup" basedir=".">


    <import file="fetchIdea.xml"/>
    <import file="fetchGrammarKit.xml"/>
    <import file="fetchFlexSkeleton.xml"/>


    <target name="setup" depends="ideaIU.checkVersionChanged, checkReady" unless="ideaIU.versionChanged, isReady">
        <antcall target="idea.setup"/>
        <antcall target="grammarKit.setup"/>
        <antcall target="flexSkeleton.setup"/>
    </target>


    <target name="checkReady">
        <condition property="isReady">
            <and>
                <available file="${basedir}/idea-IU" type="dir"/>
                <available file="${basedir}/idea-IU/build.txt" type="file"/>
                <available file="${basedir}/grammar-kit.jar" type="file"/>
                <available file="${basedir}/light-psi-all.jar" type="file"/>
            </and>
        </condition>
    </target>

    <target name="reset">
        <delete dir="${dependenciesDir}" quiet="true"/>
        <delete dir="${ideaTargetDir}" quiet="true"/>
        <delete dir="${grammarKitTargetFile}" quiet="true"/>
        <delete dir="${psiTargetFile}" quiet="true"/>
        <delete dir="${flexTargetFile}" quiet="true"/>
    </target>

</project>

